# 总览

RFC 规定 HTTP 的状态码为「三位数」，第一个数字定义了响应的类别，被分为五类:

1. 「1xx」: 代表请求已被接受，需要继续处理。
2. 「2xx」: 表示成功状态。
3. 「3xx」: 重定向状态。
4. 「4xx」: 客户端错误。
5. 「5xx」: 服务器端错误。

## 100(客户端继续发送请求，这是临时响应)

这个临时响应是用来通知客户端它的部分请求已经被服务器接收，且仍未被拒绝。客户端应当继续发送请求的剩余部分，或者如果请求已经完成，忽略这个响应。服务器必须在请求完成后向客户端发送一个最终响应
`场景：客户端发送POST请求前，征询服务器情况，看服务器是否处理POST的数据`

## 101

服务器根据客户端的请求切换协议，主要用于websocket或http2升级

## 2xx

- 200(成功):请求已成功，请求所希望的响应头或数据体将随此响应返回201(已创建):请求成功并且服务器创建了新的资源
- 202(已创建):服务器已经接收请求，但尚未处理
- 203(非授权信息):服务器已成功处理请求，但返回的信息可能来自另一来源
- 204(无内容):服务器成功处理请求，但没有返回任何内容
- 205(重置内容):服务器成功处理请求，但没有返回任何内容
- 206(部分内容):服务器成功处理了部分请求,`场景：断点续传或者是视频大文件的加载`

## 3xx 重定向

### 301

- 301 moved permanently，永久性重定向，表示资源已被分配了新的 URL，这时应该按 Location 首部字段提示的 URI 重新保存。
 如果浏览器收到的是 301，则会缓存重定向的地址，之后不会再重新请求服务器，直接使用缓存的地址请求，这样可以减少请求次数。
 301 适合地址永久转移的场景，比如`域名变更`；

### 302 found，临时性重定向，表示资源临时被分配了新的 URL。

- 如果浏览器收到的是 302，则不会缓存重定向地址，浏览器将来会继续以原有地址请求。
- 302 适合临时转移的场景，比如`首页临时跳转到活动页`

### 303 see other，表示资源存在着另一个 URL，应使用 GET 方法获取资源。

当 301、302、303 响应状态码返回时，几乎所有的浏览器都会把 POST 改成 GET，并删除请求报文内的主体，之后请求会自动再次发送 301、302 标准是禁止将 POST 方法改变成 GET 方法的，但实际使用时大家都会这么做

### 304  not modified，当协商缓存命中时会返回这个状态码。

资源未修改，服务器通过该状态码告诉客户端，请求的资源和过去一样，并没有任何变化，建议自行使用过去的缓存。通常，304 状态码的响应中，服务器不会附带任何的响应体。
`告诉客户端，请求的资源没有变化，可以使用之前的缓存`

### 307 temporary redirect，临时重定向，和302含义相同,不会改变method

### http 302 303 307之间的区别（重点）

- 302 允许各种各样的重定向，一般情况下都会实现为到 GET 的重定向，但是不能确保 POST 会重定向为 POST 
   
   当服务器返回302状态码时，浏览器可能会错误地将POST请求转换为GET请求进行重定向，尽管HTTP规范建议保持原始请求方法。

- 303 只允许任意请求到 GET 的重定向

- 307 和 302 一样，除了不允许 POST 到 GET 的重定向 
     307状态码明确要求浏览器不应改变请求方法，即使在重定向时也应该保持原始的POST、PUT或其他方法

简要历史原因

那为什么有了 307 和 303 还需要 302呢？把总结放在最前面。302 在最初的定义中，内容和现在的 307 是一样的，不允许重定向方法的改写（从 POST 到 GET，由于 GET 不应该有 body，实际上 body 也被改了）。但是早期浏览器在实现的时候有的实现成 303 的效果，有的实现成 307 的效果。于是在之后的标准，302 在某些浏览器中错误的实现被写进规范，成为 303，而 302 原本的效果被复制了到了 307。在最近的一次标准修订中，302 标准被修改成不再强制需要维持原请求的方法。所以就产生了现在的 302、303 和 307

### 301和302对于seo来说哪个更好 （301）

301重定向是永久重定向，表示原始页面已永久移动到新位置。使用301重定向时，搜索引擎会将原始URL的大部分排名权重传递给新URL。这对SEO来说是有益的，特别是在需要永久移动页面到新URL，而希望保持搜索引擎排名时。301重定向适用于网站迁移、合并多个页面或长期页面移动的情况。

302重定向是临时重定向，表示页面临时移动到新位置，但未来可能会返回到原始URL。搜索引擎通常不会将原始URL的排名权重传递给新URL，因为它们预期页面最终会返回到原始位置。使用302重定向时，原始页面的排名可能不会受到太大影响，但也不会将排名权重传递给临时页面。302重定向适合临时内容更改、促销活动页面或当内容需要短期内移动到其他URL时。

对于SEO而言，如果你的目标是永久移动页面并希望维持该页面的搜索引擎排名，301重定向更为适合。它有助于保持链接权重和排名，是处理永久URL变化的首选方法。

然而，如果你只是临时移动页面，而且打算将来将内容移回原始URL，302重定向是更合适的选择。使用302重定向可以告诉搜索引擎这是一个暂时的变动，从而帮助保留原始URL的排名。

## 4XX 客户端错误

- 400 bad request，请求报文存在语法错误。`参数有误，服务器无法识别`
- 401 unauthorized，表示发送的请求需要有通过 HTTP 认证的认证信息。
- 403 forbidden，表示对请求资源的访问被服务器拒绝。
- 404 not found，表示在服务器上没有找到请求的资源。
- 405 Method Not Allowed，服务器禁止使用该方法，客户端可以通过options方法来查看服务器允许的访问方法，如下 👇

## 5XX 服务器错误

- 500 internal sever error，表示服务器端在执行请求时发生了错误。
- 502 Bad Gateway，服务器自身是正常的，访问的时候出了问题，具体啥错误我们不知道。
- 503 service unavailable，`表明服务器暂时处于超负载或正在停机维护，无法处理请求`。
- 504 Gateway Timeout网关超时

### 502 与 504 的区别

这两种异常状态码都与网关 Gateway 有关，首先明确两个概念

Proxy (Gateway)，反向代理层或者网关层。在公司级应用中一般使用 Nginx 扮演这个角色
Application (Upstream server)，应用层服务，作为 Proxy 层的上游服务。在公司中一般为各种语言编写的服务器应用，如 Go/Java/Python/PHP/Node 等

此时关于 502 与 504 的区别就很显而易见

- 502 Bad Gateway：一般表现为你自己写的「应用层服务(Java/Go/PHP)挂了」，或者网关指定的上游服务直接指错了地址，网关层无法接收到响应

- 504 Gateway Timeout：一般表现为「应用层服务 (Upstream) 超时，超过了 Gatway 配置的 Timeout」，如查库操作耗时三分钟，超过了 Nginx 配置的超时时间
